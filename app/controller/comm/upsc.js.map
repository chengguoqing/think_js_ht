{
    "version": 3,
    "sources": [
        "..\\..\\..\\src\\controller\\comm\\upsc.js"
    ],
    "names": [
        "Base",
        "require",
        "tengxun_sc",
        "fs",
        "path",
        "rename",
        "think",
        "promisify",
        "module",
        "exports",
        "indexAction",
        "file",
        "ctx",
        "query",
        "action",
        "file_name",
        "uuid",
        "extname",
        "name",
        "filePath",
        "join",
        "ROOT_PATH",
        "mkdir",
        "dirname",
        "urk_dd",
        "url_e",
        "test_up_etr",
        "msg_d",
        "code",
        "msg",
        "url",
        "state",
        "data",
        "fail"
    ],
    "mappings": "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",
    "file": "..\\..\\..\\src\\controller\\comm\\upsc.js",
    "sourcesContent": [
        "const Base = require('../base.js');\r\nconst tengxun_sc = require('../../util/tengxun_sc.js');\r\nconst fs = require('fs');\r\nconst path = require('path');\r\nconst rename = think.promisify(fs.rename, fs); // 通过 promisify 方法把 rename 方法包装成 Promise 接口\r\n\r\n//上传图片\r\nmodule.exports = class extends Base {\r\n    async indexAction() {\r\n\r\n        const file = this.file('image');  \r\n        if (this.ctx.query.action != \"config\") {\r\n            var file_name = think.uuid() + path.extname(file.name)\r\n            const filePath = path.join(think.ROOT_PATH, \"runtime/upload/\" + file_name);\r\n            think.mkdir(path.dirname(filePath));\r\n            await rename(file.path, filePath);\r\n            var urk_dd = \"runtime/upload/\" + file_name\r\n            var url_e = await tengxun_sc.test_up_etr(file_name, urk_dd)  \r\n            var msg_d = {}\r\n            msg_d.code = 0\r\n            msg_d.msg = \"上传成功\"\r\n            msg_d.url = url_e\r\n            msg_d.state = \"SUCCESS\"\r\n            msg_d.data = {\r\n                path: url_e,\r\n                url: url_e\r\n            }\r\n        } else {\r\n            msg_d = {\r\n                /* 上传图片配置项 */\r\n                \"imageActionName\": \"uploadimage\",\r\n                /* 执行上传图片的action名称 */\r\n                \"imageFieldName\": \"image\",\r\n                /* 提交的图片表单名称 */\r\n                \"imageMaxSize\": 2048000,\r\n                /* 上传大小限制，单位B */\r\n                \"imageAllowFiles\": [\".png\", \".jpg\", \".jpeg\", \".gif\", \".bmp\"],\r\n                /* 上传图片格式显示 */\r\n                \"imageCompressEnable\": true,\r\n                /* 是否压缩图片,默认是true */\r\n                \"imageCompressBorder\": 1600,\r\n                /* 图片压缩最长边限制 */\r\n                \"imageInsertAlign\": \"none\",\r\n                /* 插入的图片浮动方式 */\r\n                \"imageUrlPrefix\": \"\",\r\n                /* 图片访问路径前缀 */\r\n                \"imagePathFormat\": \"/ueditor/jsp/upload/image/{yyyy}{mm}{dd}/{time}{rand:6}\",\r\n                /* 上传保存路径,可以自定义保存路径和文件名格式 */\r\n                /* {filename} 会替换成原文件名,配置这项需要注意中文乱码问题 */\r\n                /* {rand:6} 会替换成随机数,后面的数字是随机数的位数 */\r\n                /* {time} 会替换成时间戳 */\r\n                /* {yyyy} 会替换成四位年份 */\r\n                /* {yy} 会替换成两位年份 */\r\n                /* {mm} 会替换成两位月份 */\r\n                /* {dd} 会替换成两位日期 */\r\n                /* {hh} 会替换成两位小时 */\r\n                /* {ii} 会替换成两位分钟 */\r\n                /* {ss} 会替换成两位秒 */\r\n                /* 非法字符 \\ : * ? \" < > | */\r\n                /* 具请体看线上文档: fex.baidu.com/ueditor/#use-format_upload_filename */\r\n\r\n                /* 涂鸦图片上传配置项 */\r\n                \"scrawlActionName\": \"uploadscrawl\",\r\n                /* 执行上传涂鸦的action名称 */\r\n                \"scrawlFieldName\": \"upfile\",\r\n                /* 提交的图片表单名称 */\r\n                \"scrawlPathFormat\": \"/ueditor/jsp/upload/image/{yyyy}{mm}{dd}/{time}{rand:6}\",\r\n                /* 上传保存路径,可以自定义保存路径和文件名格式 */\r\n                \"scrawlMaxSize\": 2048000,\r\n                /* 上传大小限制，单位B */\r\n                \"scrawlUrlPrefix\": \"\",\r\n                /* 图片访问路径前缀 */\r\n                \"scrawlInsertAlign\": \"none\",\r\n\r\n                /* 截图工具上传 */\r\n                \"snapscreenActionName\": \"uploadimage\",\r\n                /* 执行上传截图的action名称 */\r\n                \"snapscreenPathFormat\": \"/ueditor/jsp/upload/image/{yyyy}{mm}{dd}/{time}{rand:6}\",\r\n                /* 上传保存路径,可以自定义保存路径和文件名格式 */\r\n                \"snapscreenUrlPrefix\": \"\",\r\n                /* 图片访问路径前缀 */\r\n                \"snapscreenInsertAlign\": \"none\",\r\n                /* 插入的图片浮动方式 */\r\n\r\n                /* 抓取远程图片配置 */\r\n                \"catcherLocalDomain\": [\"127.0.0.1\", \"localhost\", \"img.baidu.com\"],\r\n                \"catcherActionName\": \"catchimage\",\r\n                /* 执行抓取远程图片的action名称 */\r\n                \"catcherFieldName\": \"source\",\r\n                /* 提交的图片列表表单名称 */\r\n                \"catcherPathFormat\": \"/ueditor/jsp/upload/image/{yyyy}{mm}{dd}/{time}{rand:6}\",\r\n                /* 上传保存路径,可以自定义保存路径和文件名格式 */\r\n                \"catcherUrlPrefix\": \"\",\r\n                /* 图片访问路径前缀 */\r\n                \"catcherMaxSize\": 2048000,\r\n                /* 上传大小限制，单位B */\r\n                \"catcherAllowFiles\": [\".png\", \".jpg\", \".jpeg\", \".gif\", \".bmp\"],\r\n                /* 抓取图片格式显示 */\r\n\r\n                /* 上传视频配置 */\r\n                \"videoActionName\": \"uploadvideo\",\r\n                /* 执行上传视频的action名称 */\r\n                \"videoFieldName\": \"upfile\",\r\n                /* 提交的视频表单名称 */\r\n                \"videoPathFormat\": \"/ueditor/jsp/upload/video/{yyyy}{mm}{dd}/{time}{rand:6}\",\r\n                /* 上传保存路径,可以自定义保存路径和文件名格式 */\r\n                \"videoUrlPrefix\": \"\",\r\n                /* 视频访问路径前缀 */\r\n                \"videoMaxSize\": 102400000,\r\n                /* 上传大小限制，单位B，默认100MB */\r\n                \"videoAllowFiles\": [\r\n        \".flv\", \".swf\", \".mkv\", \".avi\", \".rm\", \".rmvb\", \".mpeg\", \".mpg\",\r\n        \".ogg\", \".ogv\", \".mov\", \".wmv\", \".mp4\", \".webm\", \".mp3\", \".wav\", \".mid\"],\r\n                /* 上传视频格式显示 */\r\n\r\n                /* 上传文件配置 */\r\n                \"fileActionName\": \"uploadfile\",\r\n                /* controller里,执行上传视频的action名称 */\r\n                \"fileFieldName\": \"upfile\",\r\n                /* 提交的文件表单名称 */\r\n                \"filePathFormat\": \"/ueditor/jsp/upload/file/{yyyy}{mm}{dd}/{time}{rand:6}\",\r\n                /* 上传保存路径,可以自定义保存路径和文件名格式 */\r\n                \"fileUrlPrefix\": \"\",\r\n                /* 文件访问路径前缀 */\r\n                \"fileMaxSize\": 51200000,\r\n                /* 上传大小限制，单位B，默认50MB */\r\n                \"fileAllowFiles\": [\r\n        \".png\", \".jpg\", \".jpeg\", \".gif\", \".bmp\",\r\n        \".flv\", \".swf\", \".mkv\", \".avi\", \".rm\", \".rmvb\", \".mpeg\", \".mpg\",\r\n        \".ogg\", \".ogv\", \".mov\", \".wmv\", \".mp4\", \".webm\", \".mp3\", \".wav\", \".mid\",\r\n        \".rar\", \".zip\", \".tar\", \".gz\", \".7z\", \".bz2\", \".cab\", \".iso\",\r\n        \".doc\", \".docx\", \".xls\", \".xlsx\", \".ppt\", \".pptx\", \".pdf\", \".txt\", \".md\", \".xml\"\r\n    ],\r\n                /* 上传文件格式显示 */\r\n\r\n                /* 列出指定目录下的图片 */\r\n                \"imageManagerActionName\": \"listimage\",\r\n                /* 执行图片管理的action名称 */\r\n                \"imageManagerListPath\": \"/ueditor/jsp/upload/image/\",\r\n                /* 指定要列出图片的目录 */\r\n                \"imageManagerListSize\": 20,\r\n                /* 每次列出文件数量 */\r\n                \"imageManagerUrlPrefix\": \"\",\r\n                /* 图片访问路径前缀 */\r\n                \"imageManagerInsertAlign\": \"none\",\r\n                /* 插入的图片浮动方式 */\r\n                \"imageManagerAllowFiles\": [\".png\", \".jpg\", \".jpeg\", \".gif\", \".bmp\"],\r\n                /* 列出的文件类型 */\r\n\r\n                /* 列出指定目录下的文件 */\r\n                \"fileManagerActionName\": \"listfile\",\r\n                /* 执行文件管理的action名称 */\r\n                \"fileManagerListPath\": \"/ueditor/jsp/upload/file/\",\r\n                /* 指定要列出文件的目录 */\r\n                \"fileManagerUrlPrefix\": \"\",\r\n                /* 文件访问路径前缀 */\r\n                \"fileManagerListSize\": 20,\r\n                /* 每次列出文件数量 */\r\n                \"fileManagerAllowFiles\": [\r\n        \".png\", \".jpg\", \".jpeg\", \".gif\", \".bmp\",\r\n        \".flv\", \".swf\", \".mkv\", \".avi\", \".rm\", \".rmvb\", \".mpeg\", \".mpg\",\r\n        \".ogg\", \".ogv\", \".mov\", \".wmv\", \".mp4\", \".webm\", \".mp3\", \".wav\", \".mid\",\r\n        \".rar\", \".zip\", \".tar\", \".gz\", \".7z\", \".bz2\", \".cab\", \".iso\",\r\n        \".doc\", \".docx\", \".xls\", \".xlsx\", \".ppt\", \".pptx\", \".pdf\", \".txt\", \".md\", \".xml\"\r\n    ] /* 列出的文件类型 */\r\n\r\n            }\r\n        }\r\n        this.fail(msg_d);\r\n    }\r\n\r\n};\r\n"
    ]
}